[
    {
        "id": "b663a263.c3d16",
        "type": "tab",
        "label": "Conexion",
        "disabled": false,
        "info": ""
    },
    {
        "id": "ce9375a8.f95258",
        "type": "mqtt in",
        "z": "b663a263.c3d16",
        "name": "",
        "topic": "infind/GRUPO1/ESP2/conexion",
        "qos": "2",
        "broker": "a4c37cf8.c7d05",
        "x": 290,
        "y": 640,
        "wires": [
            [
                "440a2c77.bf3134",
                "8a55eeff.04313"
            ]
        ]
    },
    {
        "id": "b118fb83.bf6848",
        "type": "debug",
        "z": "b663a263.c3d16",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 850,
        "y": 600,
        "wires": []
    },
    {
        "id": "440a2c77.bf3134",
        "type": "json",
        "z": "b663a263.c3d16",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 490,
        "y": 640,
        "wires": [
            [
                "6953274e.afb268"
            ]
        ]
    },
    {
        "id": "8a55eeff.04313",
        "type": "debug",
        "z": "b663a263.c3d16",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 510,
        "y": 600,
        "wires": []
    },
    {
        "id": "6953274e.afb268",
        "type": "function",
        "z": "b663a263.c3d16",
        "name": "+ fecha",
        "func": "\nmsg.payload.date = new Date();\n\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 620,
        "y": 640,
        "wires": [
            [
                "b118fb83.bf6848",
                "1cfe5800.d4e148",
                "ba7a759f.f40578",
                "a56795b7.80a008"
            ]
        ]
    },
    {
        "id": "1cfe5800.d4e148",
        "type": "mongodb out",
        "z": "b663a263.c3d16",
        "mongodb": "be33f6e9.0df408",
        "name": "",
        "collection": "_LOGS",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "insert",
        "x": 910,
        "y": 640,
        "wires": []
    },
    {
        "id": "ba7a759f.f40578",
        "type": "change",
        "z": "b663a263.c3d16",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "ESP2online",
                "pt": "global",
                "to": "payload.online",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 880,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "f2ec6ca8.dd4ed",
        "type": "mqtt in",
        "z": "b663a263.c3d16",
        "name": "",
        "topic": "infind/GRUPO1/ESP1/conexion",
        "qos": "2",
        "broker": "a4c37cf8.c7d05",
        "x": 290,
        "y": 340,
        "wires": [
            [
                "37dc41a4.4f5d2e",
                "f75319a9.01c338"
            ]
        ]
    },
    {
        "id": "14f3c2b9.b70c2d",
        "type": "debug",
        "z": "b663a263.c3d16",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 850,
        "y": 300,
        "wires": []
    },
    {
        "id": "37dc41a4.4f5d2e",
        "type": "json",
        "z": "b663a263.c3d16",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 490,
        "y": 340,
        "wires": [
            [
                "8c235099.ccae8"
            ]
        ]
    },
    {
        "id": "f75319a9.01c338",
        "type": "debug",
        "z": "b663a263.c3d16",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 510,
        "y": 300,
        "wires": []
    },
    {
        "id": "8c235099.ccae8",
        "type": "function",
        "z": "b663a263.c3d16",
        "name": "+ fecha",
        "func": "\nmsg.payload.date = new Date();\n\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 620,
        "y": 340,
        "wires": [
            [
                "14f3c2b9.b70c2d",
                "953657dc.f71088",
                "7eecbd2.b1f0a44",
                "e7a51994.e82fb8"
            ]
        ]
    },
    {
        "id": "953657dc.f71088",
        "type": "mongodb out",
        "z": "b663a263.c3d16",
        "mongodb": "be33f6e9.0df408",
        "name": "",
        "collection": "_LOGS",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "insert",
        "x": 910,
        "y": 340,
        "wires": []
    },
    {
        "id": "1d75f009.a481d",
        "type": "mqtt in",
        "z": "b663a263.c3d16",
        "name": "",
        "topic": "infind/GRUPO1/ESP3/conexion",
        "qos": "2",
        "broker": "a4c37cf8.c7d05",
        "x": 290,
        "y": 960,
        "wires": [
            [
                "5ec1a849.3a77d8",
                "da1ff9c6.7349b8"
            ]
        ]
    },
    {
        "id": "67f8f9e0.0e3b58",
        "type": "debug",
        "z": "b663a263.c3d16",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 850,
        "y": 920,
        "wires": []
    },
    {
        "id": "5ec1a849.3a77d8",
        "type": "json",
        "z": "b663a263.c3d16",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 490,
        "y": 960,
        "wires": [
            [
                "15207124.e7a56f"
            ]
        ]
    },
    {
        "id": "da1ff9c6.7349b8",
        "type": "debug",
        "z": "b663a263.c3d16",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 510,
        "y": 920,
        "wires": []
    },
    {
        "id": "15207124.e7a56f",
        "type": "function",
        "z": "b663a263.c3d16",
        "name": "+ fecha",
        "func": "\nmsg.payload.date = new Date();\n\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 620,
        "y": 960,
        "wires": [
            [
                "67f8f9e0.0e3b58",
                "944fe8b7.4bbfa8",
                "747116ed.4f1ea8",
                "e4bac9a.03b8338"
            ]
        ]
    },
    {
        "id": "944fe8b7.4bbfa8",
        "type": "mongodb out",
        "z": "b663a263.c3d16",
        "mongodb": "be33f6e9.0df408",
        "name": "",
        "collection": "_LOGS",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "insert",
        "x": 910,
        "y": 960,
        "wires": []
    },
    {
        "id": "eb2200d4.b091a",
        "type": "mqtt in",
        "z": "b663a263.c3d16",
        "name": "",
        "topic": "infind/GRUPO1/ESP4/conexion",
        "qos": "2",
        "broker": "a4c37cf8.c7d05",
        "x": 290,
        "y": 1260,
        "wires": [
            [
                "eb653486.4ebec8",
                "2569b51b.87e5ca"
            ]
        ]
    },
    {
        "id": "435a7279.2bf0ac",
        "type": "debug",
        "z": "b663a263.c3d16",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 850,
        "y": 1220,
        "wires": []
    },
    {
        "id": "eb653486.4ebec8",
        "type": "json",
        "z": "b663a263.c3d16",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 490,
        "y": 1260,
        "wires": [
            [
                "42614119.98edd"
            ]
        ]
    },
    {
        "id": "2569b51b.87e5ca",
        "type": "debug",
        "z": "b663a263.c3d16",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 510,
        "y": 1220,
        "wires": []
    },
    {
        "id": "42614119.98edd",
        "type": "function",
        "z": "b663a263.c3d16",
        "name": "+ fecha",
        "func": "\nmsg.payload.date = new Date();\n\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 620,
        "y": 1260,
        "wires": [
            [
                "435a7279.2bf0ac",
                "49164a5c.f40544",
                "b493558e.64cf68",
                "5d8f75ed.e8a32c"
            ]
        ]
    },
    {
        "id": "49164a5c.f40544",
        "type": "mongodb out",
        "z": "b663a263.c3d16",
        "mongodb": "be33f6e9.0df408",
        "name": "",
        "collection": "_LOGS",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "insert",
        "x": 910,
        "y": 1260,
        "wires": []
    },
    {
        "id": "5c5a56ae.fe5628",
        "type": "mqtt in",
        "z": "b663a263.c3d16",
        "name": "",
        "topic": "infind/GRUPO1/ESP5/conexion",
        "qos": "2",
        "broker": "a4c37cf8.c7d05",
        "x": 310,
        "y": 1640,
        "wires": [
            [
                "fe8566ae.e074a8",
                "651161b.c2888a"
            ]
        ]
    },
    {
        "id": "f5b019c2.026ee8",
        "type": "debug",
        "z": "b663a263.c3d16",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 850,
        "y": 1600,
        "wires": []
    },
    {
        "id": "fe8566ae.e074a8",
        "type": "json",
        "z": "b663a263.c3d16",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 510,
        "y": 1640,
        "wires": [
            [
                "eacc4824.45bda8"
            ]
        ]
    },
    {
        "id": "651161b.c2888a",
        "type": "debug",
        "z": "b663a263.c3d16",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 530,
        "y": 1600,
        "wires": []
    },
    {
        "id": "eacc4824.45bda8",
        "type": "function",
        "z": "b663a263.c3d16",
        "name": "+ fecha",
        "func": "\nmsg.payload.date = new Date();\n\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 640,
        "y": 1640,
        "wires": [
            [
                "f5b019c2.026ee8",
                "5fe1bd3.c069144",
                "9951b0b3.cdd56",
                "3653e6cb.f7d8aa"
            ]
        ]
    },
    {
        "id": "5fe1bd3.c069144",
        "type": "mongodb out",
        "z": "b663a263.c3d16",
        "mongodb": "be33f6e9.0df408",
        "name": "",
        "collection": "_LOGS",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "insert",
        "x": 910,
        "y": 1640,
        "wires": []
    },
    {
        "id": "7eecbd2.b1f0a44",
        "type": "change",
        "z": "b663a263.c3d16",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "ESP1online",
                "pt": "global",
                "to": "payload.online",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 880,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "747116ed.4f1ea8",
        "type": "change",
        "z": "b663a263.c3d16",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "ESP3online",
                "pt": "global",
                "to": "payload.online",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 880,
        "y": 1000,
        "wires": [
            []
        ]
    },
    {
        "id": "b493558e.64cf68",
        "type": "change",
        "z": "b663a263.c3d16",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "ESP4online",
                "pt": "global",
                "to": "payload.online",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 880,
        "y": 1300,
        "wires": [
            []
        ]
    },
    {
        "id": "9951b0b3.cdd56",
        "type": "change",
        "z": "b663a263.c3d16",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "ESP5online",
                "pt": "global",
                "to": "payload.online",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 880,
        "y": 1680,
        "wires": [
            []
        ]
    },
    {
        "id": "e7a51994.e82fb8",
        "type": "link out",
        "z": "b663a263.c3d16",
        "name": "E1_connexion",
        "links": [
            "983f2d68.e4d07",
            "425968cf.b92028"
        ],
        "x": 795,
        "y": 420,
        "wires": []
    },
    {
        "id": "a56795b7.80a008",
        "type": "link out",
        "z": "b663a263.c3d16",
        "name": "E2_connexion",
        "links": [
            "983f2d68.e4d07",
            "425968cf.b92028"
        ],
        "x": 795,
        "y": 720,
        "wires": []
    },
    {
        "id": "e4bac9a.03b8338",
        "type": "link out",
        "z": "b663a263.c3d16",
        "name": "E3_connexion",
        "links": [
            "983f2d68.e4d07",
            "425968cf.b92028"
        ],
        "x": 795,
        "y": 1040,
        "wires": []
    },
    {
        "id": "5d8f75ed.e8a32c",
        "type": "link out",
        "z": "b663a263.c3d16",
        "name": "E4_connexion",
        "links": [
            "983f2d68.e4d07",
            "425968cf.b92028"
        ],
        "x": 795,
        "y": 1340,
        "wires": []
    },
    {
        "id": "3653e6cb.f7d8aa",
        "type": "link out",
        "z": "b663a263.c3d16",
        "name": "E5_connexion",
        "links": [
            "983f2d68.e4d07",
            "425968cf.b92028"
        ],
        "x": 795,
        "y": 1720,
        "wires": []
    },
    {
        "id": "5e12a46c.3df2ac",
        "type": "mqtt in",
        "z": "b663a263.c3d16",
        "name": "",
        "topic": "infind/GRUPO1/ESP0/conexion",
        "qos": "2",
        "broker": "a4c37cf8.c7d05",
        "x": 290,
        "y": 1940,
        "wires": [
            [
                "e6ae131d.f81d",
                "cc5e1dcb.ce61f"
            ]
        ]
    },
    {
        "id": "e6ae131d.f81d",
        "type": "json",
        "z": "b663a263.c3d16",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 490,
        "y": 1940,
        "wires": [
            [
                "9a4683ba.45ad5"
            ]
        ]
    },
    {
        "id": "a0074a31.d73af8",
        "type": "debug",
        "z": "b663a263.c3d16",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 830,
        "y": 1900,
        "wires": []
    },
    {
        "id": "9a4683ba.45ad5",
        "type": "function",
        "z": "b663a263.c3d16",
        "name": "+ fecha",
        "func": "\nmsg.payload.date = new Date();\n\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 620,
        "y": 1940,
        "wires": [
            [
                "f84fff84.24061",
                "a0074a31.d73af8"
            ]
        ]
    },
    {
        "id": "f84fff84.24061",
        "type": "link out",
        "z": "b663a263.c3d16",
        "name": "E0_connexion",
        "links": [
            "983f2d68.e4d07",
            "425968cf.b92028"
        ],
        "x": 775,
        "y": 1940,
        "wires": []
    },
    {
        "id": "b0042de3.6fefa",
        "type": "comment",
        "z": "b663a263.c3d16",
        "name": "Conexiones",
        "info": "Registra y almacena (DB y var global) el estado de las conexiones de las distintas ESP\n\nEnvia la constulta de numero de placa al flujo (LOG's) (NODO \"Link\")",
        "x": 230,
        "y": 140,
        "wires": []
    },
    {
        "id": "124931f3.063c5e",
        "type": "comment",
        "z": "b663a263.c3d16",
        "name": "ESP1",
        "info": "Registra y almacena (DB y var global) el estado de las conexiones de las distintas ESP\n\nEnvia la constulta de numero de placa al flujo (LOG's) (NODO \"Link\")",
        "x": 490,
        "y": 260,
        "wires": []
    },
    {
        "id": "d21f9ce0.d384",
        "type": "comment",
        "z": "b663a263.c3d16",
        "name": "ESP2",
        "info": "Registra y almacena (DB y var global) el estado de las conexiones de las distintas ESP\n\nEnvia la constulta de numero de placa al flujo (LOG's) (NODO \"Link\")",
        "x": 490,
        "y": 560,
        "wires": []
    },
    {
        "id": "ad50aeda.5f76f",
        "type": "comment",
        "z": "b663a263.c3d16",
        "name": "ESP3",
        "info": "Registra y almacena (DB y var global) el estado de las conexiones de las distintas ESP\n\nEnvia la constulta de numero de placa al flujo (LOG's) (NODO \"Link\")",
        "x": 490,
        "y": 880,
        "wires": []
    },
    {
        "id": "84c3c7f7.94d0b8",
        "type": "comment",
        "z": "b663a263.c3d16",
        "name": "ESP4",
        "info": "Registra y almacena (DB y var global) el estado de las conexiones de las distintas ESP\n\nEnvia la constulta de numero de placa al flujo (LOG's) (NODO \"Link\")",
        "x": 490,
        "y": 1180,
        "wires": []
    },
    {
        "id": "cc5e1dcb.ce61f",
        "type": "debug",
        "z": "b663a263.c3d16",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 510,
        "y": 1900,
        "wires": []
    },
    {
        "id": "be5e07ed.c99548",
        "type": "comment",
        "z": "b663a263.c3d16",
        "name": "ESP5",
        "info": "Registra y almacena (DB y var global) el estado de las conexiones de las distintas ESP\n\nEnvia la constulta de numero de placa al flujo (LOG's) (NODO \"Link\")",
        "x": 510,
        "y": 1560,
        "wires": []
    },
    {
        "id": "6a05f830.a1b078",
        "type": "comment",
        "z": "b663a263.c3d16",
        "name": "ESP0 (Broadcast)",
        "info": "Registra y almacena (DB y var global) el estado de las conexiones de las distintas ESP\n\nEnvia la constulta de numero de placa al flujo (LOG's) (NODO \"Link\")",
        "x": 530,
        "y": 1860,
        "wires": []
    },
    {
        "id": "fc20c03b.ab65a",
        "type": "mqtt in",
        "z": "b663a263.c3d16",
        "name": "",
        "topic": "infind/GRUPO1/ESP6/conexion",
        "qos": "2",
        "broker": "a4c37cf8.c7d05",
        "x": 1370,
        "y": 1640,
        "wires": [
            [
                "7ac1da97.1c1fe4",
                "67b6f9a2.525d48"
            ]
        ]
    },
    {
        "id": "cdaa72bd.5598e",
        "type": "debug",
        "z": "b663a263.c3d16",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 1910,
        "y": 1600,
        "wires": []
    },
    {
        "id": "7ac1da97.1c1fe4",
        "type": "json",
        "z": "b663a263.c3d16",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 1570,
        "y": 1640,
        "wires": [
            [
                "8482ad34.667e9"
            ]
        ]
    },
    {
        "id": "67b6f9a2.525d48",
        "type": "debug",
        "z": "b663a263.c3d16",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 1590,
        "y": 1600,
        "wires": []
    },
    {
        "id": "8482ad34.667e9",
        "type": "function",
        "z": "b663a263.c3d16",
        "name": "+ fecha",
        "func": "\nmsg.payload.date = new Date();\n\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1700,
        "y": 1640,
        "wires": [
            [
                "cdaa72bd.5598e",
                "cb233050.6307c",
                "dfa72920.2d8018",
                "d045b189.b2ff6"
            ]
        ]
    },
    {
        "id": "cb233050.6307c",
        "type": "mongodb out",
        "z": "b663a263.c3d16",
        "mongodb": "be33f6e9.0df408",
        "name": "",
        "collection": "_LOGS",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "insert",
        "x": 1970,
        "y": 1640,
        "wires": []
    },
    {
        "id": "dfa72920.2d8018",
        "type": "change",
        "z": "b663a263.c3d16",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "ESP6online",
                "pt": "global",
                "to": "payload.online",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1940,
        "y": 1680,
        "wires": [
            []
        ]
    },
    {
        "id": "d045b189.b2ff6",
        "type": "link out",
        "z": "b663a263.c3d16",
        "name": "E5_connexion",
        "links": [
            "983f2d68.e4d07",
            "425968cf.b92028"
        ],
        "x": 1855,
        "y": 1720,
        "wires": []
    },
    {
        "id": "adcb0344.a56d5",
        "type": "comment",
        "z": "b663a263.c3d16",
        "name": "ESP6",
        "info": "Registra y almacena (DB y var global) el estado de las conexiones de las distintas ESP\n\nEnvia la constulta de numero de placa al flujo (LOG's) (NODO \"Link\")",
        "x": 1570,
        "y": 1560,
        "wires": []
    },
    {
        "id": "a4c37cf8.c7d05",
        "type": "mqtt-broker",
        "z": "",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "compatmode": true,
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "willTopic": "",
        "willQos": "0",
        "willPayload": ""
    },
    {
        "id": "be33f6e9.0df408",
        "type": "mongodb",
        "z": "",
        "hostname": "iot.ac.uma.es",
        "port": "27017",
        "db": "II1",
        "name": ""
    }
]