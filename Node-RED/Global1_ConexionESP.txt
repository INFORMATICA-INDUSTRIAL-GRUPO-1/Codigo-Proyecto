[
    {
        "id": "d3421838.3f2458",
        "type": "tab",
        "label": "Conexion",
        "disabled": false,
        "info": ""
    },
    {
        "id": "582f0ff6.0f2bc",
        "type": "mqtt in",
        "z": "d3421838.3f2458",
        "name": "",
        "topic": "infind/GRUPO1/ESP2/conexion",
        "qos": "2",
        "broker": "9e077711.1813b8",
        "x": 259.9999542236328,
        "y": 647.0000112652779,
        "wires": [
            [
                "9a96a4f9.d3f858",
                "8f835556.a77588"
            ]
        ]
    },
    {
        "id": "be0e9fb5.b63ee",
        "type": "debug",
        "z": "d3421838.3f2458",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 983.7659721374512,
        "y": 497.00015354156494,
        "wires": []
    },
    {
        "id": "9a96a4f9.d3f858",
        "type": "json",
        "z": "d3421838.3f2458",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 579.0000343322754,
        "y": 638.0000333786011,
        "wires": [
            [
                "f0b96bcb.686828"
            ]
        ]
    },
    {
        "id": "8f835556.a77588",
        "type": "debug",
        "z": "d3421838.3f2458",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 677.7655715942383,
        "y": 552.0000848770142,
        "wires": []
    },
    {
        "id": "f0b96bcb.686828",
        "type": "function",
        "z": "d3421838.3f2458",
        "name": "+ fecha",
        "func": "\nmsg.payload.date = new Date();\n\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 794.7656021118164,
        "y": 643.1111588478088,
        "wires": [
            [
                "be0e9fb5.b63ee",
                "8b4c0fe9.60d19",
                "d1e38ee.c9a3e7",
                "9230d0af.3822b"
            ]
        ]
    },
    {
        "id": "8b4c0fe9.60d19",
        "type": "mongodb out",
        "z": "d3421838.3f2458",
        "mongodb": "3c9b84cf.c8d42c",
        "name": "",
        "collection": "_LOGS",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "insert",
        "x": 1212.7037200927734,
        "y": 632.5939598083496,
        "wires": []
    },
    {
        "id": "d1e38ee.c9a3e7",
        "type": "change",
        "z": "d3421838.3f2458",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "ESP2online",
                "pt": "global",
                "to": "payload.online",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1207.3788986206055,
        "y": 692.2227573394775,
        "wires": [
            [
                "473443af.66612c"
            ]
        ]
    },
    {
        "id": "169cd722.86a939",
        "type": "mongodb in",
        "z": "d3421838.3f2458",
        "mongodb": "3c9b84cf.c8d42c",
        "name": "",
        "collection": "_LOGS",
        "operation": "find",
        "x": 473.3866996765137,
        "y": 28.382850646972656,
        "wires": [
            [
                "720078d3.933538"
            ]
        ]
    },
    {
        "id": "720078d3.933538",
        "type": "debug",
        "z": "d3421838.3f2458",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 767.7656517028809,
        "y": 31.750039100646973,
        "wires": []
    },
    {
        "id": "d9f1437b.01cc7",
        "type": "inject",
        "z": "d3421838.3f2458",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 118.37499618530273,
        "y": 37.632829666137695,
        "wires": [
            [
                "169cd722.86a939"
            ]
        ]
    },
    {
        "id": "4de19bcc.d409b4",
        "type": "mqtt in",
        "z": "d3421838.3f2458",
        "name": "",
        "topic": "infind/GRUPO1/ESP1/conexion",
        "qos": "2",
        "broker": "9e077711.1813b8",
        "x": 268.765625,
        "y": 338.75000190734863,
        "wires": [
            [
                "2ffa843c.08d38c",
                "e5847f6c.0de0e"
            ]
        ]
    },
    {
        "id": "7f8761d7.b05f9",
        "type": "debug",
        "z": "d3421838.3f2458",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 1084.5315971374512,
        "y": 232.75014114379883,
        "wires": []
    },
    {
        "id": "2ffa843c.08d38c",
        "type": "json",
        "z": "d3421838.3f2458",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 587.7657051086426,
        "y": 329.75002402067184,
        "wires": [
            [
                "142dd1bd.9271fe"
            ]
        ]
    },
    {
        "id": "e5847f6c.0de0e",
        "type": "debug",
        "z": "d3421838.3f2458",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 686.5312423706055,
        "y": 243.75007551908493,
        "wires": []
    },
    {
        "id": "142dd1bd.9271fe",
        "type": "function",
        "z": "d3421838.3f2458",
        "name": "+ fecha",
        "func": "\nmsg.payload.date = new Date();\n\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 803.5312728881836,
        "y": 334.8611494898796,
        "wires": [
            [
                "7f8761d7.b05f9",
                "93d750c5.69363",
                "831a5af9.400328",
                "1ffdb0f0.77d75f"
            ]
        ]
    },
    {
        "id": "93d750c5.69363",
        "type": "mongodb out",
        "z": "d3421838.3f2458",
        "mongodb": "3c9b84cf.c8d42c",
        "name": "",
        "collection": "_LOGS",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "insert",
        "x": 1221.4693908691406,
        "y": 324.3439504504204,
        "wires": []
    },
    {
        "id": "76b589e3.27e0f8",
        "type": "mqtt in",
        "z": "d3421838.3f2458",
        "name": "",
        "topic": "infind/GRUPO1/ESP3/conexion",
        "qos": "2",
        "broker": "9e077711.1813b8",
        "x": 248.765625,
        "y": 959.7500019073486,
        "wires": [
            [
                "de3dcf0a.ecffe",
                "4ce5eb7f.1e6a84"
            ]
        ]
    },
    {
        "id": "2dedf591.f0ce3a",
        "type": "debug",
        "z": "d3421838.3f2458",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 972.5316429138184,
        "y": 809.7501441836357,
        "wires": []
    },
    {
        "id": "de3dcf0a.ecffe",
        "type": "json",
        "z": "d3421838.3f2458",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 567.7657051086426,
        "y": 950.7500240206718,
        "wires": [
            [
                "a71f246b.e77398"
            ]
        ]
    },
    {
        "id": "4ce5eb7f.1e6a84",
        "type": "debug",
        "z": "d3421838.3f2458",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 666.5312423706055,
        "y": 864.7500755190849,
        "wires": []
    },
    {
        "id": "a71f246b.e77398",
        "type": "function",
        "z": "d3421838.3f2458",
        "name": "+ fecha",
        "func": "\nmsg.payload.date = new Date();\n\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 783.5312728881836,
        "y": 955.8611494898796,
        "wires": [
            [
                "2dedf591.f0ce3a",
                "4f080f4a.9663",
                "9d7121ab.4b352",
                "968df0a.428a31"
            ]
        ]
    },
    {
        "id": "4f080f4a.9663",
        "type": "mongodb out",
        "z": "d3421838.3f2458",
        "mongodb": "3c9b84cf.c8d42c",
        "name": "",
        "collection": "_LOGS",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "insert",
        "x": 1201.4693450927734,
        "y": 871.3439407348633,
        "wires": []
    },
    {
        "id": "b51b6cba.634b9",
        "type": "mqtt in",
        "z": "d3421838.3f2458",
        "name": "",
        "topic": "infind/GRUPO1/ESP4/conexion",
        "qos": "2",
        "broker": "9e077711.1813b8",
        "x": 242.765625,
        "y": 1265.75,
        "wires": [
            [
                "c068d79b.5d9218",
                "a7768bc0.1ecb28"
            ]
        ]
    },
    {
        "id": "b8fd4086.23bf6",
        "type": "debug",
        "z": "d3421838.3f2458",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 966.5316429138184,
        "y": 1115.750142276287,
        "wires": []
    },
    {
        "id": "c068d79b.5d9218",
        "type": "json",
        "z": "d3421838.3f2458",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 561.7657051086426,
        "y": 1256.7500221133232,
        "wires": [
            [
                "8adc03db.f9fcb"
            ]
        ]
    },
    {
        "id": "a7768bc0.1ecb28",
        "type": "debug",
        "z": "d3421838.3f2458",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 660.5312423706055,
        "y": 1170.7500736117363,
        "wires": []
    },
    {
        "id": "8adc03db.f9fcb",
        "type": "function",
        "z": "d3421838.3f2458",
        "name": "+ fecha",
        "func": "\nmsg.payload.date = new Date();\n\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 777.5312728881836,
        "y": 1261.861147582531,
        "wires": [
            [
                "b8fd4086.23bf6",
                "6fab7684.9424a8",
                "cf04dda3.104ee",
                "767c0bda.d21794"
            ]
        ]
    },
    {
        "id": "6fab7684.9424a8",
        "type": "mongodb out",
        "z": "d3421838.3f2458",
        "mongodb": "3c9b84cf.c8d42c",
        "name": "",
        "collection": "_LOGS",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "insert",
        "x": 1195.4693908691406,
        "y": 1251.3439485430717,
        "wires": []
    },
    {
        "id": "a803529b.40a77",
        "type": "mqtt in",
        "z": "d3421838.3f2458",
        "name": "",
        "topic": "infind/GRUPO1/ESP5/conexion",
        "qos": "2",
        "broker": "9e077711.1813b8",
        "x": 251.765625,
        "y": 1645.7500743865967,
        "wires": [
            [
                "9c23c114.90bcd",
                "ab1cad12.680f"
            ]
        ]
    },
    {
        "id": "be36e8f3.7f2738",
        "type": "debug",
        "z": "d3421838.3f2458",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 975.5316429138184,
        "y": 1495.7502166628838,
        "wires": []
    },
    {
        "id": "9c23c114.90bcd",
        "type": "json",
        "z": "d3421838.3f2458",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 570.7657051086426,
        "y": 1636.75009649992,
        "wires": [
            [
                "9fc5eb52.5573d8"
            ]
        ]
    },
    {
        "id": "ab1cad12.680f",
        "type": "debug",
        "z": "d3421838.3f2458",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 669.5312423706055,
        "y": 1550.750147998333,
        "wires": []
    },
    {
        "id": "9fc5eb52.5573d8",
        "type": "function",
        "z": "d3421838.3f2458",
        "name": "+ fecha",
        "func": "\nmsg.payload.date = new Date();\n\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 786.5312728881836,
        "y": 1641.8612219691277,
        "wires": [
            [
                "be36e8f3.7f2738",
                "fa72a77.ed45c58",
                "48807436.a2c1ec",
                "d1210b5c.9a9f28"
            ]
        ]
    },
    {
        "id": "fa72a77.ed45c58",
        "type": "mongodb out",
        "z": "d3421838.3f2458",
        "mongodb": "3c9b84cf.c8d42c",
        "name": "",
        "collection": "_LOGS",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "insert",
        "x": 1204.4693908691406,
        "y": 1631.3440229296684,
        "wires": []
    },
    {
        "id": "473443af.66612c",
        "type": "debug",
        "z": "d3421838.3f2458",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 1457.765625,
        "y": 691.75,
        "wires": []
    },
    {
        "id": "d797993e.3211d8",
        "type": "inject",
        "z": "d3421838.3f2458",
        "name": "",
        "topic": "",
        "payload": "{}",
        "payloadType": "json",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "x": 392.7656440734863,
        "y": 140.74999904632568,
        "wires": [
            [
                "ea8e42f4.7111c"
            ]
        ]
    },
    {
        "id": "ea8e42f4.7111c",
        "type": "mongodb out",
        "z": "d3421838.3f2458",
        "mongodb": "3c9b84cf.c8d42c",
        "name": "",
        "collection": "_LOGS",
        "payonly": false,
        "upsert": false,
        "multi": false,
        "operation": "delete",
        "x": 652.765625,
        "y": 136.75,
        "wires": []
    },
    {
        "id": "831a5af9.400328",
        "type": "change",
        "z": "d3421838.3f2458",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "ESP1online",
                "pt": "global",
                "to": "payload.online",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1183.8959312438965,
        "y": 397.9999990463257,
        "wires": [
            []
        ]
    },
    {
        "id": "9d7121ab.4b352",
        "type": "change",
        "z": "d3421838.3f2458",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "ESP3online",
                "pt": "global",
                "to": "payload.online",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1137.8958740234375,
        "y": 975.4444580078125,
        "wires": [
            []
        ]
    },
    {
        "id": "cf04dda3.104ee",
        "type": "change",
        "z": "d3421838.3f2458",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "ESP4online",
                "pt": "global",
                "to": "payload.online",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1115.8958740234375,
        "y": 1309.888916015625,
        "wires": [
            []
        ]
    },
    {
        "id": "48807436.a2c1ec",
        "type": "change",
        "z": "d3421838.3f2458",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "ESP5online",
                "pt": "global",
                "to": "payload.online",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1101.8958740234375,
        "y": 1691.2222900390625,
        "wires": [
            []
        ]
    },
    {
        "id": "603dfdd0.11f114",
        "type": "debug",
        "z": "d3421838.3f2458",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 935.3907318115234,
        "y": 2448.3333673477173,
        "wires": []
    },
    {
        "id": "ff0d7baf.62bea8",
        "type": "mongodb in",
        "z": "d3421838.3f2458",
        "mongodb": "3c9b84cf.c8d42c",
        "name": "",
        "collection": "_USERS",
        "operation": "find",
        "x": 674.0118408203125,
        "y": 2448.966205596924,
        "wires": [
            [
                "603dfdd0.11f114"
            ]
        ]
    },
    {
        "id": "fd0226c4.68dbd8",
        "type": "inject",
        "z": "d3421838.3f2458",
        "name": "",
        "topic": "",
        "payload": "14620280",
        "payloadType": "num",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 150.00009155273438,
        "y": 2446.2163734436035,
        "wires": [
            [
                "b29e4561.6f9418"
            ]
        ]
    },
    {
        "id": "b29e4561.6f9418",
        "type": "function",
        "z": "d3421838.3f2458",
        "name": "ultimo registro",
        "func": "msg.limit=1;\nmsg.sort={\"CHIPID\":-1};\nmsg.payload={};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 349.66666412353516,
        "y": 2433.3336477279663,
        "wires": [
            [
                "ff0d7baf.62bea8"
            ]
        ]
    },
    {
        "id": "daa82b2a.8e36a8",
        "type": "inject",
        "z": "d3421838.3f2458",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 227.6666717529297,
        "y": 2509.666748046875,
        "wires": [
            [
                "ff0d7baf.62bea8"
            ]
        ]
    },
    {
        "id": "1ffdb0f0.77d75f",
        "type": "link out",
        "z": "d3421838.3f2458",
        "name": "E1_connexion",
        "links": [
            "983f2d68.e4d07",
            "425968cf.b92028"
        ],
        "x": 1144.88671875,
        "y": 442.69921875,
        "wires": []
    },
    {
        "id": "9230d0af.3822b",
        "type": "link out",
        "z": "d3421838.3f2458",
        "name": "E2_connexion",
        "links": [
            "983f2d68.e4d07",
            "425968cf.b92028"
        ],
        "x": 1139.265625,
        "y": 731.75,
        "wires": []
    },
    {
        "id": "968df0a.428a31",
        "type": "link out",
        "z": "d3421838.3f2458",
        "name": "E3_connexion",
        "links": [
            "983f2d68.e4d07",
            "425968cf.b92028"
        ],
        "x": 1087.265625,
        "y": 1018.75,
        "wires": []
    },
    {
        "id": "767c0bda.d21794",
        "type": "link out",
        "z": "d3421838.3f2458",
        "name": "E4_connexion",
        "links": [
            "983f2d68.e4d07",
            "425968cf.b92028"
        ],
        "x": 1083.265625,
        "y": 1354.75,
        "wires": []
    },
    {
        "id": "d1210b5c.9a9f28",
        "type": "link out",
        "z": "d3421838.3f2458",
        "name": "E5_connexion",
        "links": [
            "983f2d68.e4d07",
            "425968cf.b92028"
        ],
        "x": 1108.2656116485596,
        "y": 1784.7500762939453,
        "wires": []
    },
    {
        "id": "e1315c8c.f6edc",
        "type": "mqtt in",
        "z": "d3421838.3f2458",
        "name": "",
        "topic": "infind/GRUPO1/ESP0/conexion",
        "qos": "2",
        "broker": "9e077711.1813b8",
        "x": 256.5078125,
        "y": 1926.0234375,
        "wires": [
            [
                "3d599417.f7666c"
            ]
        ]
    },
    {
        "id": "3d599417.f7666c",
        "type": "json",
        "z": "d3421838.3f2458",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 502.54283905029297,
        "y": 1925.239411354065,
        "wires": [
            [
                "2c914b5b.6d74f4"
            ]
        ]
    },
    {
        "id": "bc859cac.a116b",
        "type": "debug",
        "z": "d3421838.3f2458",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 990,
        "y": 1880,
        "wires": []
    },
    {
        "id": "2c914b5b.6d74f4",
        "type": "function",
        "z": "d3421838.3f2458",
        "name": "+ fecha",
        "func": "\nmsg.payload.date = new Date();\n\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 774.5078392028809,
        "y": 1923.023473739624,
        "wires": [
            [
                "acbf8679.a97388",
                "bc859cac.a116b"
            ]
        ]
    },
    {
        "id": "acbf8679.a97388",
        "type": "link out",
        "z": "d3421838.3f2458",
        "name": "E0_connexion",
        "links": [
            "983f2d68.e4d07",
            "425968cf.b92028"
        ],
        "x": 1185.5078125,
        "y": 1965.0234375,
        "wires": []
    },
    {
        "id": "9e077711.1813b8",
        "type": "mqtt-broker",
        "z": "",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "compatmode": true,
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "willTopic": "",
        "willQos": "0",
        "willPayload": ""
    },
    {
        "id": "3c9b84cf.c8d42c",
        "type": "mongodb",
        "z": "",
        "hostname": "iot.ac.uma.es",
        "port": "27017",
        "db": "II1",
        "name": ""
    }
]