[
    {
        "id": "df9389d.b285778",
        "type": "tab",
        "label": "Conexion",
        "disabled": false,
        "info": ""
    },
    {
        "id": "6199da4e.28c814",
        "type": "mqtt in",
        "z": "df9389d.b285778",
        "name": "",
        "topic": "infind/GRUPO1/ESP2/conexion",
        "qos": "2",
        "broker": "cd5dbf9e.ebb57",
        "x": 259.9999542236328,
        "y": 647.0000112652779,
        "wires": [
            [
                "21b6e457.f0544c",
                "80d15396.02873"
            ]
        ]
    },
    {
        "id": "6ba63e81.c85b7",
        "type": "debug",
        "z": "df9389d.b285778",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 983.7659721374512,
        "y": 497.00015354156494,
        "wires": []
    },
    {
        "id": "21b6e457.f0544c",
        "type": "json",
        "z": "df9389d.b285778",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 579.0000343322754,
        "y": 638.0000333786011,
        "wires": [
            [
                "f4c070ab.5a6f8"
            ]
        ]
    },
    {
        "id": "80d15396.02873",
        "type": "debug",
        "z": "df9389d.b285778",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 677.7655715942383,
        "y": 552.0000848770142,
        "wires": []
    },
    {
        "id": "f4c070ab.5a6f8",
        "type": "function",
        "z": "df9389d.b285778",
        "name": "+ fecha",
        "func": "\nmsg.payload.date = new Date();\n\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 794.7656021118164,
        "y": 643.1111588478088,
        "wires": [
            [
                "6ba63e81.c85b7",
                "49d72e7c.4297b",
                "8284a0d.3db876",
                "d166de5b.65a81"
            ]
        ]
    },
    {
        "id": "49d72e7c.4297b",
        "type": "mongodb out",
        "z": "df9389d.b285778",
        "mongodb": "3284a27d.270ace",
        "name": "",
        "collection": "_LOGS",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "insert",
        "x": 1212.7037200927734,
        "y": 632.5939598083496,
        "wires": []
    },
    {
        "id": "8284a0d.3db876",
        "type": "change",
        "z": "df9389d.b285778",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "ESP2online",
                "pt": "global",
                "to": "payload.online",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1207.3788986206055,
        "y": 692.2227573394775,
        "wires": [
            [
                "503f9ae4.da6744"
            ]
        ]
    },
    {
        "id": "213f4e1.fb9f0b2",
        "type": "mongodb in",
        "z": "df9389d.b285778",
        "mongodb": "3284a27d.270ace",
        "name": "",
        "collection": "_LOGS",
        "operation": "find",
        "x": 473.3866996765137,
        "y": 28.382850646972656,
        "wires": [
            [
                "f670dce5.45b06"
            ]
        ]
    },
    {
        "id": "f670dce5.45b06",
        "type": "debug",
        "z": "df9389d.b285778",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 767.7656517028809,
        "y": 31.750039100646973,
        "wires": []
    },
    {
        "id": "a0f1838b.0e6d2",
        "type": "inject",
        "z": "df9389d.b285778",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 118.37499618530273,
        "y": 37.632829666137695,
        "wires": [
            [
                "213f4e1.fb9f0b2"
            ]
        ]
    },
    {
        "id": "6f1a7ae1.f492e4",
        "type": "mqtt in",
        "z": "df9389d.b285778",
        "name": "",
        "topic": "infind/GRUPO1/ESP1/conexion",
        "qos": "2",
        "broker": "cd5dbf9e.ebb57",
        "x": 268.765625,
        "y": 338.75000190734863,
        "wires": [
            [
                "c15f4bd4.6d9178",
                "1967e3c9.37eeec"
            ]
        ]
    },
    {
        "id": "44525ce1.de3dd4",
        "type": "debug",
        "z": "df9389d.b285778",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 1084.5315971374512,
        "y": 232.75014114379883,
        "wires": []
    },
    {
        "id": "c15f4bd4.6d9178",
        "type": "json",
        "z": "df9389d.b285778",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 587.7657051086426,
        "y": 329.75002402067184,
        "wires": [
            [
                "86d936b5.524a38"
            ]
        ]
    },
    {
        "id": "1967e3c9.37eeec",
        "type": "debug",
        "z": "df9389d.b285778",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 686.5312423706055,
        "y": 243.75007551908493,
        "wires": []
    },
    {
        "id": "86d936b5.524a38",
        "type": "function",
        "z": "df9389d.b285778",
        "name": "+ fecha",
        "func": "\nmsg.payload.date = new Date();\n\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 803.5312728881836,
        "y": 334.8611494898796,
        "wires": [
            [
                "44525ce1.de3dd4",
                "93f12619.0b8808",
                "bc7c0f83.a0817",
                "2c54ad31.535242"
            ]
        ]
    },
    {
        "id": "93f12619.0b8808",
        "type": "mongodb out",
        "z": "df9389d.b285778",
        "mongodb": "3284a27d.270ace",
        "name": "",
        "collection": "_LOGS",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "insert",
        "x": 1221.4693908691406,
        "y": 324.3439504504204,
        "wires": []
    },
    {
        "id": "f093b72c.0bca18",
        "type": "mqtt in",
        "z": "df9389d.b285778",
        "name": "",
        "topic": "infind/GRUPO1/ESP3/conexion",
        "qos": "2",
        "broker": "cd5dbf9e.ebb57",
        "x": 248.765625,
        "y": 959.7500019073486,
        "wires": [
            [
                "bc206f6c.e2ff6",
                "4d47b417.ea0d7c"
            ]
        ]
    },
    {
        "id": "fafc52a4.35199",
        "type": "debug",
        "z": "df9389d.b285778",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 972.5316429138184,
        "y": 809.7501441836357,
        "wires": []
    },
    {
        "id": "bc206f6c.e2ff6",
        "type": "json",
        "z": "df9389d.b285778",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 567.7657051086426,
        "y": 950.7500240206718,
        "wires": [
            [
                "82c806e7.dc8268"
            ]
        ]
    },
    {
        "id": "4d47b417.ea0d7c",
        "type": "debug",
        "z": "df9389d.b285778",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 666.5312423706055,
        "y": 864.7500755190849,
        "wires": []
    },
    {
        "id": "82c806e7.dc8268",
        "type": "function",
        "z": "df9389d.b285778",
        "name": "+ fecha",
        "func": "\nmsg.payload.date = new Date();\n\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 783.5312728881836,
        "y": 955.8611494898796,
        "wires": [
            [
                "fafc52a4.35199",
                "1d04dfa5.f9108",
                "7df080e9.ab1f7",
                "77d5aa6e.36d744"
            ]
        ]
    },
    {
        "id": "1d04dfa5.f9108",
        "type": "mongodb out",
        "z": "df9389d.b285778",
        "mongodb": "3284a27d.270ace",
        "name": "",
        "collection": "_LOGS",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "insert",
        "x": 1201.4693450927734,
        "y": 871.3439407348633,
        "wires": []
    },
    {
        "id": "55373150.7ecab",
        "type": "mqtt in",
        "z": "df9389d.b285778",
        "name": "",
        "topic": "infind/GRUPO1/ESP4/conexion",
        "qos": "2",
        "broker": "cd5dbf9e.ebb57",
        "x": 242.765625,
        "y": 1265.75,
        "wires": [
            [
                "5bbe7f95.63ac1",
                "9960f40c.778dd8"
            ]
        ]
    },
    {
        "id": "c4d6b358.25d4a",
        "type": "debug",
        "z": "df9389d.b285778",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 966.5316429138184,
        "y": 1115.750142276287,
        "wires": []
    },
    {
        "id": "5bbe7f95.63ac1",
        "type": "json",
        "z": "df9389d.b285778",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 561.7657051086426,
        "y": 1256.7500221133232,
        "wires": [
            [
                "cad98210.43f8"
            ]
        ]
    },
    {
        "id": "9960f40c.778dd8",
        "type": "debug",
        "z": "df9389d.b285778",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 660.5312423706055,
        "y": 1170.7500736117363,
        "wires": []
    },
    {
        "id": "cad98210.43f8",
        "type": "function",
        "z": "df9389d.b285778",
        "name": "+ fecha",
        "func": "\nmsg.payload.date = new Date();\n\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 777.5312728881836,
        "y": 1261.861147582531,
        "wires": [
            [
                "c4d6b358.25d4a",
                "1d7d0c9e.6b29c3",
                "ff4a64ad.d82eb8",
                "64efdf85.5502"
            ]
        ]
    },
    {
        "id": "1d7d0c9e.6b29c3",
        "type": "mongodb out",
        "z": "df9389d.b285778",
        "mongodb": "3284a27d.270ace",
        "name": "",
        "collection": "_LOGS",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "insert",
        "x": 1195.4693908691406,
        "y": 1251.3439485430717,
        "wires": []
    },
    {
        "id": "e8c861d0.04ed7",
        "type": "mqtt in",
        "z": "df9389d.b285778",
        "name": "",
        "topic": "infind/GRUPO1/ESP5/conexion",
        "qos": "2",
        "broker": "cd5dbf9e.ebb57",
        "x": 251.765625,
        "y": 1645.7500743865967,
        "wires": [
            [
                "ff70fbe7.6ea4f8",
                "8c62ab2e.af34d8"
            ]
        ]
    },
    {
        "id": "e40f968c.003b58",
        "type": "debug",
        "z": "df9389d.b285778",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 975.5316429138184,
        "y": 1495.7502166628838,
        "wires": []
    },
    {
        "id": "ff70fbe7.6ea4f8",
        "type": "json",
        "z": "df9389d.b285778",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 570.7657051086426,
        "y": 1636.75009649992,
        "wires": [
            [
                "82dea5e4.16ba58"
            ]
        ]
    },
    {
        "id": "8c62ab2e.af34d8",
        "type": "debug",
        "z": "df9389d.b285778",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 669.5312423706055,
        "y": 1550.750147998333,
        "wires": []
    },
    {
        "id": "82dea5e4.16ba58",
        "type": "function",
        "z": "df9389d.b285778",
        "name": "+ fecha",
        "func": "\nmsg.payload.date = new Date();\n\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 786.5312728881836,
        "y": 1641.8612219691277,
        "wires": [
            [
                "e40f968c.003b58",
                "4a3c3689.b64238",
                "43a1a7c1.ad6a48",
                "3a6e3253.6e2e3e"
            ]
        ]
    },
    {
        "id": "4a3c3689.b64238",
        "type": "mongodb out",
        "z": "df9389d.b285778",
        "mongodb": "3284a27d.270ace",
        "name": "",
        "collection": "_LOGS",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "insert",
        "x": 1204.4693908691406,
        "y": 1631.3440229296684,
        "wires": []
    },
    {
        "id": "503f9ae4.da6744",
        "type": "debug",
        "z": "df9389d.b285778",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 1457.765625,
        "y": 691.75,
        "wires": []
    },
    {
        "id": "3c30e5f.ed25d1a",
        "type": "inject",
        "z": "df9389d.b285778",
        "name": "",
        "topic": "",
        "payload": "{}",
        "payloadType": "json",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "x": 392.7656440734863,
        "y": 140.74999904632568,
        "wires": [
            [
                "f45163ce.200c4"
            ]
        ]
    },
    {
        "id": "f45163ce.200c4",
        "type": "mongodb out",
        "z": "df9389d.b285778",
        "mongodb": "3284a27d.270ace",
        "name": "",
        "collection": "_LOGS",
        "payonly": false,
        "upsert": false,
        "multi": false,
        "operation": "delete",
        "x": 652.765625,
        "y": 136.75,
        "wires": []
    },
    {
        "id": "bc7c0f83.a0817",
        "type": "change",
        "z": "df9389d.b285778",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "ESP1online",
                "pt": "global",
                "to": "payload.online",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1183.8959312438965,
        "y": 397.9999990463257,
        "wires": [
            []
        ]
    },
    {
        "id": "7df080e9.ab1f7",
        "type": "change",
        "z": "df9389d.b285778",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "ESP3online",
                "pt": "global",
                "to": "payload.online",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1137.8958740234375,
        "y": 975.4444580078125,
        "wires": [
            []
        ]
    },
    {
        "id": "ff4a64ad.d82eb8",
        "type": "change",
        "z": "df9389d.b285778",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "ESP4online",
                "pt": "global",
                "to": "payload.online",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1115.8958740234375,
        "y": 1309.888916015625,
        "wires": [
            []
        ]
    },
    {
        "id": "43a1a7c1.ad6a48",
        "type": "change",
        "z": "df9389d.b285778",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "ESP5online",
                "pt": "global",
                "to": "payload.online",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1101.8958740234375,
        "y": 1691.2222900390625,
        "wires": [
            []
        ]
    },
    {
        "id": "450b2942.804068",
        "type": "debug",
        "z": "df9389d.b285778",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 935.3907318115234,
        "y": 2448.3333673477173,
        "wires": []
    },
    {
        "id": "92f9daf6.21cfc8",
        "type": "mongodb in",
        "z": "df9389d.b285778",
        "mongodb": "3284a27d.270ace",
        "name": "",
        "collection": "_USERS",
        "operation": "find",
        "x": 674.0118408203125,
        "y": 2448.966205596924,
        "wires": [
            [
                "450b2942.804068"
            ]
        ]
    },
    {
        "id": "f1b1b84c.948e88",
        "type": "inject",
        "z": "df9389d.b285778",
        "name": "",
        "topic": "",
        "payload": "14620280",
        "payloadType": "num",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 150.00009155273438,
        "y": 2446.2163734436035,
        "wires": [
            [
                "c9082f0a.468fe"
            ]
        ]
    },
    {
        "id": "c9082f0a.468fe",
        "type": "function",
        "z": "df9389d.b285778",
        "name": "ultimo registro",
        "func": "msg.limit=1;\nmsg.sort={\"CHIPID\":-1};\nmsg.payload={};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 349.66666412353516,
        "y": 2433.3336477279663,
        "wires": [
            [
                "92f9daf6.21cfc8"
            ]
        ]
    },
    {
        "id": "6d864f74.ffd1f",
        "type": "inject",
        "z": "df9389d.b285778",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 227.6666717529297,
        "y": 2509.666748046875,
        "wires": [
            [
                "92f9daf6.21cfc8"
            ]
        ]
    },
    {
        "id": "2c54ad31.535242",
        "type": "link out",
        "z": "df9389d.b285778",
        "name": "E1_connexion",
        "links": [
            "983f2d68.e4d07"
        ],
        "x": 1144.88671875,
        "y": 442.69921875,
        "wires": []
    },
    {
        "id": "d166de5b.65a81",
        "type": "link out",
        "z": "df9389d.b285778",
        "name": "E2_connexion",
        "links": [
            "983f2d68.e4d07"
        ],
        "x": 1139.265625,
        "y": 731.75,
        "wires": []
    },
    {
        "id": "77d5aa6e.36d744",
        "type": "link out",
        "z": "df9389d.b285778",
        "name": "E3_connexion",
        "links": [
            "983f2d68.e4d07"
        ],
        "x": 1087.265625,
        "y": 1018.75,
        "wires": []
    },
    {
        "id": "64efdf85.5502",
        "type": "link out",
        "z": "df9389d.b285778",
        "name": "E4_connexion",
        "links": [
            "983f2d68.e4d07"
        ],
        "x": 1083.265625,
        "y": 1354.75,
        "wires": []
    },
    {
        "id": "3a6e3253.6e2e3e",
        "type": "link out",
        "z": "df9389d.b285778",
        "name": "E5_connexion",
        "links": [
            "983f2d68.e4d07"
        ],
        "x": 1108.2656116485596,
        "y": 1784.7500762939453,
        "wires": []
    },
    {
        "id": "87bdccf4.fccf2",
        "type": "mqtt in",
        "z": "df9389d.b285778",
        "name": "",
        "topic": "infind/GRUPO1/ESP0/conexion",
        "qos": "2",
        "broker": "cd5dbf9e.ebb57",
        "x": 256.5078125,
        "y": 1926.0234375,
        "wires": [
            [
                "c2291e0e.c34d7"
            ]
        ]
    },
    {
        "id": "42d60b14.4e8384",
        "type": "mongodb in",
        "z": "df9389d.b285778",
        "mongodb": "3284a27d.270ace",
        "name": "",
        "collection": "_USERS",
        "operation": "find",
        "x": 1049.5078430175781,
        "y": 1886.6902170181274,
        "wires": [
            []
        ]
    },
    {
        "id": "c2291e0e.c34d7",
        "type": "json",
        "z": "df9389d.b285778",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 502.54283905029297,
        "y": 1925.239411354065,
        "wires": [
            [
                "7263d45c.04a99c"
            ]
        ]
    },
    {
        "id": "4e1bb59e.7ba5dc",
        "type": "debug",
        "z": "df9389d.b285778",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 927.7644233703613,
        "y": 1816.665542602539,
        "wires": []
    },
    {
        "id": "7263d45c.04a99c",
        "type": "function",
        "z": "df9389d.b285778",
        "name": "+ fecha",
        "func": "\nmsg.payload.date = new Date();\n\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 774.5078392028809,
        "y": 1923.023473739624,
        "wires": [
            [
                "42d60b14.4e8384",
                "4b719b04.9bff84",
                "4e1bb59e.7ba5dc"
            ]
        ]
    },
    {
        "id": "4b719b04.9bff84",
        "type": "link out",
        "z": "df9389d.b285778",
        "name": "E0_connexion",
        "links": [
            "983f2d68.e4d07"
        ],
        "x": 1185.5078125,
        "y": 1965.0234375,
        "wires": []
    },
    {
        "id": "cd5dbf9e.ebb57",
        "type": "mqtt-broker",
        "z": "",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "compatmode": true,
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "willTopic": "",
        "willQos": "0",
        "willPayload": ""
    },
    {
        "id": "3284a27d.270ace",
        "type": "mongodb",
        "z": "",
        "hostname": "iot.ac.uma.es",
        "port": "27017",
        "db": "II1",
        "name": ""
    }
]